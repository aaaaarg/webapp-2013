{% extends "security/index.html" %}

{% from "security/_macros.html" import render_field_with_errors, render_field %}
{%- from "collection/macros.html" import show_collections_list, add_to_collection_form, collection_js with context %}
{%- from "thing/macros.html" import show_thing with context %}
{%- from "bootstrap/macros.html" import render_pagination %}


{% block title %}
{{title}}
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-9">
      <h2>{{title}}</h2>

			{% set cdate = '' %}
			{% for thing in things %}
				{% set date = thing.created_at|datetimeformat %}
				{% if date!=cdate %}
				<h4 class="text-muted">{{ date }}</h4>
				{% endif %}
				{% set cdate = date %}
				{{ show_thing(thing) }}
			{% endfor %}

			{{ render_pagination(pagination, 'user.profile') }}
   
    </div>
    <div class="col-md-3">
            {% if not public %}
    		<p>
    			Do you want to <a href="{{ url_for('user.edit_profile') }}">edit your profile</a>?
    		</p>
    		<p>
    			Do you want to <a href="{{ url_for_security('change_password') }}">change your password</a>?
    		</p>
            {% endif %}
        <small class="text-muted">COLLECTIONS</small>
        {{ show_collections_list(collections|sort(attribute='title'), None) }}
    </div>
</div>
{% endblock %}